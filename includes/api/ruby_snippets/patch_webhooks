<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="c1"># Patch Webhook (PATCH )</span>
<span class="k">def</span> <span class="nf">send_request</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'http://localhost:3000/api/webhooks/'</span><span class="p">)</span>

  <span class="c1"># Create client</span>
  <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
  <span class="n">body</span> <span class="o">=</span> <span class="s2">"{
  </span><span class="se">\"</span><span class="s2">data</span><span class="se">\"</span><span class="s2">: {
    </span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"\"</span><span class="s2">,
    </span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">webhooks</span><span class="se">\"</span><span class="s2">,
    </span><span class="se">\"</span><span class="s2">attributes</span><span class="se">\"</span><span class="s2">: {
      </span><span class="se">\"</span><span class="s2">url</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">http://localhost:3001/mwwondemand-order-notifications</span><span class="se">\"</span><span class="s2">,
      </span><span class="se">\"</span><span class="s2">printed</span><span class="se">\"</span><span class="s2">: true,
      </span><span class="se">\"</span><span class="s2">pressed</span><span class="se">\"</span><span class="s2">: true,
      </span><span class="se">\"</span><span class="s2">cut</span><span class="se">\"</span><span class="s2">: true,
      </span><span class="se">\"</span><span class="s2">sewn</span><span class="se">\"</span><span class="s2">: true,
      </span><span class="se">\"</span><span class="s2">turned</span><span class="se">\"</span><span class="s2">: true,
      </span><span class="se">\"</span><span class="s2">packed</span><span class="se">\"</span><span class="s2">: true
    }
  }
}"</span>

  <span class="c1"># Create Request</span>
  <span class="n">req</span> <span class="o">=</span>  <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Patch</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="c1"># Add headers</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">add_field</span> <span class="s2">"Content-Type"</span><span class="p">,</span> <span class="s2">"application/vnd.api+json"</span>
  <span class="c1"># Add headers</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">add_field</span> <span class="s2">"Authorization"</span><span class="p">,</span> <span class="s2">"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjo2NDgzODcyODM1Njg4MjE1MjYsImV4cCI6MTQ4MDUxNzcyOX0.SijY04z68CwqQ6AV2N3cWSng6fQAl06zodWicym_uuY"</span>
  <span class="c1"># Add headers</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">add_field</span> <span class="s2">"Accept"</span><span class="p">,</span> <span class="s2">"application/vnd.api+json; version=1"</span>
  <span class="c1"># Set body</span>
  <span class="n">req</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="n">body</span>

  <span class="c1"># Fetch Request</span>
  <span class="n">res</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Response HTTP Status Code: </span><span class="si">#{</span><span class="n">res</span><span class="p">.</span><span class="nf">code</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"Response HTTP Response Body: </span><span class="si">#{</span><span class="n">res</span><span class="p">.</span><span class="nf">body</span><span class="si">}</span><span class="s2">"</span>
<span class="k">rescue</span> <span class="no">StandardError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="s2">"HTTP Request failed (</span><span class="si">#{</span><span class="n">e</span><span class="p">.</span><span class="nf">message</span><span class="si">}</span><span class="s2">)"</span>
<span class="k">end</span>



</code></pre>
